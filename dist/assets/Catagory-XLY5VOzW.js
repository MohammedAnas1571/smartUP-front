import{r,j as e,I as N,b as n,A as m,B as f}from"./index-BX51NH_z.js";import{u as S,P as v}from"./PaginationPage-DdJYRvVX.js";import{D as b,a as D,b as E,d as O,c as w}from"./dialog-BJU-ez73.js";import{L as P}from"./label-RxH0x7be.js";import{D as A}from"./DeleteModal-DOligmJj.js";import{C as W,c as k,e as F}from"./card-B230IaWm.js";import"./pagination-B6vEXH4V.js";import"./index-sbGFPfT_.js";const L=({change:s,setChange:o,fetchCatagories:x})=>{const[p,l]=r.useState(""),[d,c]=r.useState("");r.useEffect(()=>{s.id&&l(s.name.trim())},[s]);const h=async u=>{u.preventDefault();const g=p.trim();if(g)c("");else{c("Please add fields ");return}try{s.id?(await n.put("/auth/admin/editCatagory",{id:s.id,catagory:g}),m.success("Catagory Edited")):(await n.post("/auth/admin/catagory",{catagory:g}),m.success("Catagory added")),o({id:"",name:"",isOpen:!1}),x()}catch(i){n.isAxiosError(i)&&i.response&&m.error(i.response.data.message||"Something Went To Wrong")}};return e.jsx(b,{open:s.isOpen,onOpenChange:()=>o({name:"",id:"",isOpen:!1}),children:e.jsxs(D,{className:"sm:max-w-[500px]",children:[e.jsx(E,{children:e.jsx(O,{className:"text-xl ",children:"Add Catagory"})}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"grid gap-2 py-4",children:[e.jsx("div",{className:"",children:e.jsx(P,{htmlFor:"name",className:`text-right \r
          text-lg`,children:"Name"})}),e.jsx(N,{className:"capitalize",defaultValue:s.name,onChange:u=>l(u.target.value)}),d&&e.jsx("p",{className:"text-red-500 text-md",children:d})]}),e.jsx(w,{children:e.jsx("button",{className:"bg-black p-3 rounded-md text-white",type:"submit",children:"Submit"})})]})]})})},M=()=>{const[s,o]=r.useState({id:"",name:"",isOpen:!1}),[x,p]=r.useState([]),[l,d]=r.useState({id:"",isOpen:!1,activeStatus:!0}),{currentPage:c,setCurrentPage:h,totalPages:u,setTotalPages:g}=S(),i=async()=>{try{const{data:a}=await n.get(`/auth/admin/catagory/?page=${c}`);p(a.catagories),g(a.pageCount)}catch(a){n.isAxiosError(a)&&a.response&&m.error(a.response.data.message||"Something Went Wrong")}};r.useEffect(()=>{i()},[c]);const j=(a,t)=>{o({id:a,name:t,isOpen:!0})},C=async(a,t)=>{d({id:a,isOpen:!0,activeStatus:t})},y=async a=>{try{await n.put(`/auth/admin/deleteCatagory/${l.id}`,{activeStatus:a}),d({id:"",isOpen:!1,activeStatus:!0}),i(),m.success("Category status changed succesfully")}catch(t){n.isAxiosError(t)&&t.response&&m.error(t.response.data.message||"Something Went Wrong")}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"my-5 mx-5 flex justify-end ",children:[s&&e.jsx(L,{change:s,fetchCatagories:i,setChange:o}),e.jsx("button",{onClick:()=>o({id:"",name:"",isOpen:!0}),className:"bg-indigo-700 rounded-lg p-3 text-white font-medium ",children:"+ Create Category"})]}),l.isOpen&&e.jsx(A,{handleDelete:y,setSelect:d,select:l}),e.jsx("div",{className:"grid grid-cols-1  md:grid-cols-3 gap-2  px-4",children:x.map((a,t)=>e.jsxs(W,{className:"w-full   shadow-xl",children:[e.jsx(k,{className:"mt-5",children:e.jsx("div",{className:"w-full items-center",children:e.jsxs("h1",{className:"capitalize text-lg font-medium ",children:[" ",t+1,". ",a.name]})})}),e.jsxs(F,{className:"flex justify-end space-x-3",children:[e.jsx(f,{onClick:()=>j(a._id,a.name),variant:"outline",children:"Edit"}),e.jsx(f,{className:`${a.activeStatus===!0?"bg-red-500":"bg-green-500"}`,onClick:()=>C(a._id,a.activeStatus),variant:"outline",children:a.activeStatus?"Unlist":"List"})]})]},a._id))}),e.jsx(v,{currentPage:c,setCurrentPage:h,totalPages:u})]})};export{M as default};
