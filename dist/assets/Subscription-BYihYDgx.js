import{b as i,A as l,j as e,r as d}from"./index-CPcYxd-k.js";import{D as u,a as j,b,d as f,c as g}from"./dialog-D-63cHGP.js";import{c as N}from"./validation-6ymd3LOM.js";import{u as y}from"./formik.esm-CycV9Q1f.js";import{D as w}from"./DeleteModal-qF5Nc4l4.js";import{a as S}from"./index-atZy3qyG.js";import"./index-nRS7f88W.js";import"./index.esm-DhO-h40l.js";import"./index-8JwjhRSi.js";const k=({change:c,setChange:r,setSubscription:n})=>{const s=y({initialValues:{planname:"",billingPeriod:"week",price:0,description:""},validationSchema:N,onSubmit:async o=>{try{const{data:a}=await i.post("/auth/admin/subscription",o);l.success(a.status),n(a.subscription),s.resetForm(),r(!1)}catch(a){i.isAxiosError(a)&&a.response&&l.error(a.response.data.message||"Something Went To Wrong")}}});return e.jsx("div",{children:e.jsx(u,{open:c,onOpenChange:r,children:e.jsxs(j,{className:"sm:max-w-[500px]",children:[e.jsx(b,{children:e.jsx(f,{className:"text-xl",children:"Add Subcription"})}),e.jsxs("form",{onSubmit:s.handleSubmit,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"planname",className:"block text-sm font-medium text-gray-700",children:"Plan Name"}),e.jsx("input",{type:"text",name:"planname",onBlur:s.handleBlur,onChange:s.handleChange,className:"mt-1 p-2 block w-full border rounded-md"}),s.touched.planname&&s.errors.planname&&e.jsx("p",{className:"text-red-600 text-sm  ",children:s.errors.planname})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Billing period"}),e.jsxs("select",{name:"billingPeriod",onChange:s.handleChange,className:"mt-1 p-2 block w-full border rounded-md",children:[e.jsx("option",{value:"week",children:"week"}),e.jsx("option",{value:"month",children:"month"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"Price"}),e.jsx("input",{type:"text",name:"price",onBlur:s.handleBlur,onChange:s.handleChange,className:"mt-1 p-2 block w-full border rounded-md"}),s.touched.price&&s.errors.price&&e.jsx("p",{className:"text-red-600 text-sm  ",children:s.errors.price})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{name:"description",onChange:s.handleChange,onBlur:s.handleBlur,className:"mt-1 p-2 block w-full border rounded-md"}),s.touched.description&&s.errors.description&&e.jsx("p",{className:"text-red-600 text-sm  ",children:s.errors.description})]}),e.jsx(g,{children:e.jsx("button",{className:"bg-black p-3 rounded-md text-white",type:"submit",children:"Submit"})})]})]})})})},O=()=>{const[c,r]=d.useState([]),[n,s]=d.useState({id:"",isOpen:!1,activeStatus:!0}),[o,a]=d.useState(!1),m=async()=>{try{const{data:t}=await i.get("/auth/admin/subscription");r(t)}catch(t){i.isAxiosError(t)&&t.response&&l.error(t.response.data.message||"Something Went Wrong")}},p=async t=>{s({id:t,isOpen:!0,activeStatus:!0})},x=async()=>{try{const{data:t}=await i.delete(`/auth/admin/subscription/${n.id}`);r(t),s({id:"",isOpen:!1,activeStatus:!0}),l.success("Subscription deleted successfully")}catch(t){i.isAxiosError(t)&&t.response&&l.error(t.response.data.message||"Something Went Wrong")}};return d.useEffect(()=>{m()},[]),e.jsxs("div",{children:[e.jsxs("div",{className:"my-5 mx-5 flex justify-end ",children:[o&&e.jsx(k,{change:o,setChange:a,setSubscription:r}),n.isOpen&&e.jsx(w,{handleDelete:x,select:n,setSelect:s}),e.jsx("button",{onClick:()=>a(!0),className:"bg-indigo-700 rounded-lg p-3 text-white font-medium ",children:"+ Create Subscription"})]}),e.jsxs("table",{className:"min-w-full divide-y ",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium  uppercase ",children:"No"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium  uppercase ",children:"planname"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium  uppercase ",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium  uppercase ",children:"BillingPeriod"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium  uppercase ",children:"price"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c&&c.map((t,h)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[h+1,"."]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.planName}),e.jsx("td",{className:"px-6 py-4 break-before-auto",children:t.description}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.billingPeriod," "]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[" ",t.price," "]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>p(t._id),className:"text-red-500 hover:text-red-700 focus:outline-none",children:e.jsx(S,{})})})]},t._id))})]})]})};export{O as default};
