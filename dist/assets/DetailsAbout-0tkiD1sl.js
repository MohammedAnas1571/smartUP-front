import{d as f,u as y,s as k,b as m,t as j,A as v,j as e,B as p,r as N,p as w}from"./index-CPcYxd-k.js";import{u as D}from"./useCourseDetails-CqyATkBm.js";import{D as C,a as S,b as A,d as M}from"./dialog-D-63cHGP.js";import{m as E}from"./validation-6ymd3LOM.js";import{u as T}from"./formik.esm-CycV9Q1f.js";import{D as F}from"./DetailDescription-D8bLlS_d.js";import"./index-nRS7f88W.js";import"./index.esm-DhO-h40l.js";import"./index-8JwjhRSi.js";import"./card-CiLoeUdg.js";import"./index-atZy3qyG.js";function O({setChange:s,change:i,courseId:t,setChapters:d}){const{loading:n}=f(o=>o.tutor),l=y(),r=T({initialValues:{modules:"",order:"",video:""},validationSchema:E,onSubmit:async o=>{try{l(k());const a=new FormData;a.append("modules",o.modules),a.append("order",o.order),a.append("video",o.video),a.append("id",t);const g={onUploadProgress:h=>{const{loaded:c,total:u}=h;let b=Math.floor(c*100/u);console.log(`${c} ${u} | ${b}% `)}},{data:x}=await m.post("/auth/tutor/addModule",a,g);s(!1),d(x.remainingChapters),l(j())}catch(a){m.isAxiosError(a)&&a.response&&v.error(a.response.data.message||"Something went wrong")}}});return e.jsx(C,{open:i,onOpenChange:o=>s(o),children:e.jsxs(S,{className:"sm:max-w-[500px]",children:[e.jsx(A,{children:e.jsx(M,{children:"Add Modules"})}),e.jsxs("form",{onSubmit:r.handleSubmit,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Module Title"}),e.jsx("input",{type:"text",name:"modules",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Enter Title",onChange:r.handleChange}),r.errors.modules&&r.touched.modules&&e.jsx("p",{className:"text-red-500",children:r.errors.modules})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Module Order"}),e.jsx("input",{type:"text",name:"order",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Enter Order",onChange:r.handleChange}),r.errors.order&&r.touched.order&&e.jsx("p",{className:"text-red-500",children:r.errors.order})]}),e.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Module video"}),e.jsx("input",{name:"video",className:"block mt-5 p-2.5 text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400",type:"file",accept:"video/*",onChange:o=>{var a;r.setFieldValue("video",(a=o.currentTarget.files)==null?void 0:a[0])}}),r.errors.video&&r.touched.video&&e.jsx("p",{className:"text-red-500",children:r.errors.video}),e.jsx(p,{type:"submit",className:"mt-5",children:n?e.jsx("span",{className:"loader "}):"Submit"})]})]})})}const G=()=>{const[s,i]=N.useState(!1),{id:t}=w(),{course:d,chapters:n,setChapters:l}=D(t);return e.jsxs("div",{children:[e.jsxs("div",{className:"relative",children:[s&&e.jsx(O,{change:s,setChange:i,setChapters:l,courseId:t}),d&&e.jsx(p,{onClick:()=>{i(!0)},className:"uppercase absolute right-5 top-52 ",children:"+Add new modules"})]}),d&&n&&e.jsx(F,{setChapters:l,courseId:t,course:d,chapters:n})]})};export{G as default};
