import{r as s,w as I,Q as S,z as q,E as N,_ as y,K as E,M as B,T as K,j as n,a as j,U as L,V as O,b as v,A as P}from"./index-BX51NH_z.js";import{C as T}from"./CourseCard-Bug0BGPB.js";import{u as z,P as H}from"./PaginationPage-DdJYRvVX.js";import"./pagination-B6vEXH4V.js";function X(t){const r=s.useRef({value:t,previous:t});return s.useMemo(()=>(r.current.value!==t&&(r.current.previous=r.current.value,r.current.value=t),r.current.previous),[t])}const _="Checkbox",[F,re]=I(_),[Q,U]=F(_),V=s.forwardRef((t,r)=>{const{__scopeCheckbox:a,name:f,checked:i,defaultChecked:d,required:u,disabled:b,value:p="on",onCheckedChange:x,...C}=t,[c,h]=s.useState(null),w=S(r,l=>h(l)),$=s.useRef(!1),e=c?!!c.closest("form"):!0,[o=!1,g]=q({prop:i,defaultProp:d,onChange:x}),D=s.useRef(o);return s.useEffect(()=>{const l=c==null?void 0:c.form;if(l){const k=()=>g(D.current);return l.addEventListener("reset",k),()=>l.removeEventListener("reset",k)}},[c,g]),s.createElement(Q,{scope:a,state:o,disabled:b},s.createElement(N.button,y({type:"button",role:"checkbox","aria-checked":m(o)?"mixed":o,"aria-required":u,"data-state":R(o),"data-disabled":b?"":void 0,disabled:b,value:p},C,{ref:w,onKeyDown:E(t.onKeyDown,l=>{l.key==="Enter"&&l.preventDefault()}),onClick:E(t.onClick,l=>{g(k=>m(k)?!0:!k),e&&($.current=l.isPropagationStopped(),$.current||l.stopPropagation())})})),e&&s.createElement(W,{control:c,bubbles:!$.current,name:f,value:p,checked:o,required:u,disabled:b,style:{transform:"translateX(-100%)"}}))}),G="CheckboxIndicator",J=s.forwardRef((t,r)=>{const{__scopeCheckbox:a,forceMount:f,...i}=t,d=U(G,a);return s.createElement(B,{present:f||m(d.state)||d.state===!0},s.createElement(N.span,y({"data-state":R(d.state),"data-disabled":d.disabled?"":void 0},i,{ref:r,style:{pointerEvents:"none",...t.style}})))}),W=t=>{const{control:r,checked:a,bubbles:f=!0,...i}=t,d=s.useRef(null),u=X(a),b=K(r);return s.useEffect(()=>{const p=d.current,x=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(x,"checked").set;if(u!==a&&c){const h=new Event("click",{bubbles:f});p.indeterminate=m(a),c.call(p,m(a)?!1:a),p.dispatchEvent(h)}},[u,a,f]),s.createElement("input",y({type:"checkbox","aria-hidden":!0,defaultChecked:m(a)?!1:a},i,{tabIndex:-1,ref:d,style:{...t.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function m(t){return t==="indeterminate"}function R(t){return m(t)?"indeterminate":t?"checked":"unchecked"}const A=V,Y=J,M=s.forwardRef(({className:t,...r},a)=>n.jsx(A,{ref:a,className:j("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:n.jsx(Y,{className:j("flex items-center justify-center text-current"),children:n.jsx(L,{className:"h-4 w-4"})})}));M.displayName=A.displayName;const ae=()=>{const[t,r]=s.useState([]),[a,f]=s.useState([]),[i,d]=s.useState(),{currentPage:u,setCurrentPage:b,totalPages:p,setTotalPages:x}=z(),C=O(),{results:c}=C.state||{},h=e=>{d(o=>o!=null&&o.includes(e)?o.filter(g=>g!==e):[...o||[],e])},w=async()=>{try{const{data:e}=await v.get(`/auth/search/?categories=${(i==null?void 0:i.join(","))||""}`);r(e)}catch(e){v.isAxiosError(e)&&e.response&&P(e.response.data.message||"Sorry, something went wrong!")}};s.useEffect(()=>{c&&r(c)},[c]);const $=async()=>{if(i)await w();else try{const{data:e}=await v.get(`/auth/courses/?page=${u}`);x(e.pageCount),r(e.courses),f(e.categories)}catch(e){v.isAxiosError(e)&&e.response&&P(e.response.data.message||"Sorry, something went wrong!")}};return s.useEffect(()=>{$()},[i,u]),n.jsxs("div",{className:"grid min-h-screen w-full md:grid-cols-[220px_1fr] lg:grid-cols-[280px_1fr]",children:[n.jsx("div",{className:"hidden border-r shadow-md md:block",children:n.jsx("div",{className:"flex-1 px-4 py-16",children:n.jsxs("nav",{className:"grid items-start border rounded-lg shadow-lg px-2 text-sm font-medium lg:px-4",children:[n.jsx("div",{className:"border-b mb-4 pb-2",children:n.jsx("h2",{className:"text-lg p-2 font-semibold",children:"Categories"})}),a&&a.map((e,o)=>n.jsxs("div",{className:" capitalize flex items-center gap-3 cursor-pointer rounded-lg px-3 py-2 text-md  transition-all hover:text-primary",children:[n.jsx(M,{onClick:()=>h(e._id),className:"h-4 w-4"})," ",e.name]},o))]})})}),n.jsxs("main",{className:"p-4 lg:p-6",children:[n.jsx("div",{className:"flex flex-row gap-4 flex-wrap",children:t.map((e,o)=>n.jsx(T,{course:e},o))}),n.jsx(H,{currentPage:u,setCurrentPage:b,totalPages:p})]})]})};export{ae as default};
