import{r as g,j as e,B as u,b as o,A as h,d as C,L as k,e as T,u as B,s as S,t as A,v as E}from"./index-BX51NH_z.js";import{u as F}from"./formik.esm-Z1YNfWFY.js";import{b as D}from"./validation-C2CMpWpB.js";import{a as p,T as V,b as P,c as b}from"./tabs-2-CNkbUu.js";import{C as m,a as y,b as j,d as v,c as N,e as w}from"./card-B230IaWm.js";import{D as L,a as I,c as W}from"./dialog-BJU-ez73.js";import"./index-8JwjhRSi.js";import"./index.esm-DXk0ftU0.js";import"./index-sbGFPfT_.js";const _=({formik:r,setChange:n})=>{const[c,l]=g.useState([]),d=async()=>{try{let{data:a}=await o.get("/auth/tutor/catagory");l(a.categories)}catch(a){o.isAxiosError(a)&&a.response&&h.error(a.response.data.message||"Something Went To Wrong")}};g.useEffect(()=>{d()},[]);const x=()=>{r.values.catagory&&r.values.title&&r.values.subTitle&&r.values.price&&r.values.tags?n("step-2"):r.setTouched({title:!0,subTitle:!0,catagory:!0,tags:!0,price:!0,level:!0})};return e.jsx(e.Fragment,{children:e.jsx(p,{value:"step-1",children:e.jsxs(m,{children:[e.jsxs(y,{children:[e.jsx(j,{children:"Basic Informations"}),e.jsx(v,{children:"Please provide basic informations about courses"})]}),e.jsx(N,{children:e.jsxs("div",{className:"grid gap-6 mb-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Title"}),e.jsx("input",{type:"text",name:"title",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Enter Title",value:r.values.title,onBlur:r.handleBlur,onChange:r.handleChange}),r.touched.title&&r.errors.title&&e.jsx("p",{className:"text-red-600 text-sm ",children:r.errors.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"SubTitle"}),e.jsx("input",{type:"text",name:"subTitle",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Enter subtitle",value:r.values.subTitle,onBlur:r.handleBlur,onChange:r.handleChange}),r.touched.subTitle&&r.errors.subTitle&&e.jsx("p",{className:"text-red-600 text-sm  ",children:r.errors.subTitle})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Catagory"}),e.jsxs("select",{name:"catagory",onBlur:r.handleBlur,value:r.values.catagory,onChange:a=>{const i=a.target.value;r.setFieldValue("catagory",i)},className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{children:"Select catagory"}),c.map(a=>e.jsx("option",{value:a._id,children:a.name},a._id))]}),r.touched.catagory&&r.errors.catagory&&e.jsx("p",{className:"text-red-600 text-sm  ",children:r.errors.catagory})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Level"}),e.jsxs("select",{name:"level",onChange:r.handleChange,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{value:"Beginners",children:"Beginners"}),e.jsx("option",{value:"Intermediate",children:"Intermediate"}),e.jsx("option",{value:"Advanced",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Tags"}),e.jsx("input",{type:"text",name:"tags",className:"bg-gray-50 border  border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Enter the tags",value:r.values.tags,onBlur:r.handleBlur,onChange:r.handleChange}),r.touched.tags&&r.errors.tags&&e.jsx("p",{className:"text-red-600 text-sm  ",children:r.errors.tags})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Price"}),e.jsx("input",{type:"text",name:"price",onBlur:r.handleBlur,className:"bg-gray-50 border  border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Enter amount",value:r.values.price,onChange:r.handleChange}),r.touched.price&&r.errors.price&&e.jsx("p",{className:"text-red-600 text-sm  ",children:r.errors.price})]})]})}),e.jsx(w,{className:"flex justify-end ",children:e.jsx(u,{type:"button",onClick:x,children:"Next"})})]})})})},H=({formik:r,setChange:n})=>{const c=()=>{r.values.description&&r.values.content?n("step-3"):r.setTouched({description:!0,content:!0})};return e.jsx("div",{children:e.jsx(p,{value:"step-2",children:e.jsxs(m,{children:[e.jsxs(y,{children:[e.jsx(j,{children:"About and Content"}),e.jsx(v,{children:"Please Provide About and Content in this course"})]}),e.jsx(N,{children:e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Description"}),e.jsx("textarea",{name:"description",className:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Enter description",value:r.values.description,onBlur:r.handleBlur,onChange:r.handleChange}),r.touched.description&&r.errors.description&&e.jsx("p",{className:"text-red-600 text-sm  ",children:r.errors.description}),e.jsx("label",{className:"block mb-2 mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"Whats is inside of the course"}),e.jsx("textarea",{name:"content",className:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Enter content",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.content}),r.touched.content&&r.errors.content&&e.jsx("p",{className:"text-red-600 text-sm ",children:r.errors.content})]})}),e.jsxs(w,{className:"flex justify-end gap-3",children:[e.jsx(u,{onClick:()=>n("step-1"),children:"Back"}),e.jsx(u,{type:"button",onClick:c,children:"Next"})]})]})})})},R=({formik:r,setChange:n})=>{const{loading:c}=C(l=>l.tutor);return e.jsx(p,{value:"step-3",children:e.jsxs(m,{children:[e.jsxs(y,{children:[e.jsx(j,{children:"Add Thumbnail and Preview"}),e.jsx(v,{children:"Please Provide thumbnail and preview about course"})]}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6 md:flex-row md:gap-6 md:items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"image",className:"text-sm font-medium text-gray-700 mb-1",children:"Thumbnail"}),e.jsx("input",{id:"image",name:"image",className:"p-2.5 text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400",type:"file",accept:"image/*",onChange:l=>{var d;r.setFieldValue("image",(d=l.currentTarget.files)==null?void 0:d[0])}}),r.touched.image&&r.errors.image&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:r.errors.image})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"preview",className:"text-sm font-medium text-gray-700 mb-1",children:"Preview video"}),e.jsx("input",{id:"preview",name:"preview",className:"p-2.5 text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400",type:"file",accept:"video/*",onChange:l=>{var d;r.setFieldValue("preview",(d=l.currentTarget.files)==null?void 0:d[0])}}),r.touched.preview&&r.errors.preview&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:r.errors.preview})]})]})}),e.jsxs(w,{className:"flex justify-end gap-3",children:[e.jsx(u,{onClick:()=>n("step-2"),children:"Back"}),e.jsxs(u,{type:"submit",children:[" ",c?e.jsx("span",{className:"loader "}):"+Create"]})]})]})})},q=({subscribed:r})=>e.jsx("div",{children:e.jsx(L,{open:r,children:e.jsxs(I,{className:"sm:max-w-[425px]",children:[e.jsx("div",{children:e.jsx("p",{className:"text-lg font-bold",children:"Please subscribe"})}),e.jsx(W,{children:e.jsx(k,{to:"/instructor/subscription",children:e.jsx(u,{children:"Add Subscription"})})})]})})}),Y=()=>{const[r,n]=g.useState(!1),c=async()=>{try{await o.get("/auth/tutor/subscribed")}catch(s){o.isAxiosError(s)&&s.response&&n(!0)}};g.useEffect(()=>{c()},[]);const[l,d]=g.useState("step-1"),x=T(),a=B(),i=F({initialValues:{title:"",subTitle:"",catagory:"",tags:"",price:"",level:"Beginners",content:"",description:"",image:"",preview:""},validationSchema:D,onSubmit:async s=>{a(S());try{const t=new FormData;t.append("title",s.title),t.append("subTitle",s.subTitle),t.append("catagory",s.catagory),t.append("tags",s.tags),t.append("price",s.price),t.append("level",s.level),t.append("description",s.description),t.append("content",s.content),t.append("image",s.image),t.append("preview",s.preview);const{data:f}=await o.post("/auth/tutor/course",t,{headers:{"Content-Type":"multipart/form-data"}});h.success(f),a(A()),i.resetForm(),x("/instructor/courses")}catch(t){o.isAxiosError(t)&&t.response&&(h.error(t.response.data.message||"Something Went To Wrong"),a(E()))}}});return e.jsxs("div",{className:"flex justify-center items-center h-screen",children:[r&&e.jsx(q,{subscribed:r}),e.jsxs(V,{defaultValue:l,value:l,className:"w-[800px]  ",children:[e.jsxs(P,{className:"grid w-full grid-cols-3",children:[e.jsx(b,{value:"step-1",children:"Basic info"}),e.jsx(b,{value:"step-2",children:"Course Details"}),e.jsx(b,{value:"step-3",children:"Adding files"})]}),e.jsxs("form",{onSubmit:i.handleSubmit,children:[e.jsx(_,{formik:i,setChange:d}),e.jsx(H,{formik:i,setChange:d}),e.jsx(R,{formik:i,setChange:d})]})]})]})};export{Y as default};
